\doxysection{Référence du fichier Mesure\+\_\+\+RES\+\_\+\+SIMPLE.\+ino}
\hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino}{}\label{_mesure___r_e_s___s_i_m_p_l_e_8ino}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
{\ttfamily \#include $<$Wire.\+h$>$}\newline
{\ttfamily \#include $<$Adafruit\+\_\+\+INA219.\+h$>$}\newline
{\ttfamily \#include $<$Adafruit\+\_\+\+ADS1\+X15.\+h$>$}\newline
{\ttfamily \#include $<$Liquid\+Crystal\+\_\+\+I2\+C.\+h$>$}\newline
{\ttfamily \#include $<$SPI.\+h$>$}\newline
{\ttfamily \#include $<$SD.\+h$>$}\newline
Graphe des dépendances par inclusion de Mesure\+\_\+\+RES\+\_\+\+SIMPLE.\+ino\+:
% FIG 0
\doxysubsubsection*{Structures de données}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_mesure_brute}{Mesure\+Brute}}
\begin{DoxyCompactList}\small\item\em Structure de données pour une mesure brute. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_buffer_circulaire}{Buffer\+Circulaire}}
\begin{DoxyCompactList}\small\item\em Buffer circulaire thread-\/safe pour les mesures. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_stats_test}{Stats\+Test}}
\begin{DoxyCompactList}\small\item\em stabilisation de la resistance pour avoire une valeur plus précise \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_etat_affichage}{Etat\+Affichage}}
\begin{DoxyCompactList}\small\item\em État de l\textquotesingle{}affichage LCD pour anti-\/flickering. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_aea848bb4a005524a574f94adbc6c65f0}{resistance\+Valide}} (float r)
\begin{DoxyCompactList}\small\item\em Valide une mesure de résistance. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6ec22dd5d0efef5c7862d062244f2d3d}{calculer\+Resistance}} (int16\+\_\+t raw\+Diff)
\begin{DoxyCompactList}\small\item\em Calcule la résistance depuis la mesure différentielle. \end{DoxyCompactList}\item 
String \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_ad380242a441638cb12c7c4f8ffd65d0a}{formater\+Valeur\+CSV}} (float valeur, int decimales=3)
\begin{DoxyCompactList}\small\item\em Formate une valeur pour export CSV. \end{DoxyCompactList}\item 
Liquid\+Crystal\+\_\+\+I2C \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a2f63ecba5f338345a6cd4ca7bfd48a90}{lcd}} (0x27, 16, 4)
\begin{DoxyCompactList}\small\item\em Écran LCD I2C. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a5189a9ff8ff84c69c1c9f0d5c518e6d4}{reinitialiser\+Variables\+Test}} ()
\begin{DoxyCompactList}\small\item\em Réinitialise toutes les variables de test de manière thread-\/safe. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6d714b0571bf85597665718596fa24c4}{tache\+Mesure\+Ultra\+Rapide}} (void \texorpdfstring{$\ast$}{*}param)
\begin{DoxyCompactList}\small\item\em Thread d\textquotesingle{}acquisition. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a8234cf882017f42811473aa035ddb0cc}{tache\+Affichage\+Sauvegarde}} (void \texorpdfstring{$\ast$}{*}param)
\begin{DoxyCompactList}\small\item\em Thread d\textquotesingle{}affichage LCD et sauvegarde SD. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a16ada3623dbae3b31d44cd17530e7285}{demarrer\+Threads}} (uint32\+\_\+t temps\+Debut)
\begin{DoxyCompactList}\small\item\em Démarre les threads d\textquotesingle{}acquisition et d\textquotesingle{}affichage. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_afcb12f7835ce41a8889afa6e0b28f7ea}{arreter\+Threads}} ()
\begin{DoxyCompactList}\small\item\em Arrête proprement les threads. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6f9652f1e487981c3821d9610f1e4509}{gestion\+Bouton\+Boot}} ()
\begin{DoxyCompactList}\small\item\em ISR pour gestion du bouton BOOT. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_ac48e6822b563e2b2c1a779f4a7f3f7cd}{bouton\+Appuye\+Et\+Reset}} ()
\begin{DoxyCompactList}\small\item\em Vérifie et réinitialise l\textquotesingle{}état du bouton. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_adf8bb3facae4c992bc0390cd2f604fbd}{attendre\+Appui\+Bouton}} (String message)
\begin{DoxyCompactList}\small\item\em Affiche un message et attend l\textquotesingle{}appui du bouton. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6efd9745976761abd83e668058abc833}{initialiser\+Capteurs}} ()
\begin{DoxyCompactList}\small\item\em Initialise les capteurs I2C. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Fonction d\textquotesingle{}initialisation Arduino. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Boucle principale du programme. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const int \mbox{\hyperlink{group___g_p_i_o_ga64a554bd679a02ee58ed7310ea6b67d3}{SD\+\_\+\+CS\+\_\+\+PIN}} = 5
\begin{DoxyCompactList}\small\item\em Chip Select carte SD. \end{DoxyCompactList}\item 
const int \mbox{\hyperlink{group___g_p_i_o_ga95a34d6dc0735eb3de18a50196e54bf9}{DAC\+\_\+\+RELAIS}} = 25
\begin{DoxyCompactList}\small\item\em Sortie DAC pour contrôle relais. \end{DoxyCompactList}\item 
const int \mbox{\hyperlink{group___g_p_i_o_ga830f87a67009b50b7674a762bc903d2c}{BOUTON\+\_\+\+BOOT}} = 0
\begin{DoxyCompactList}\small\item\em Bouton BOOT pour contrôle utilisateur. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___s_a_f_e_t_y_ga825a7d4c1903fd34db474f0c53a77727}{SEUIL\+\_\+\+COURANT\+\_\+\+MAX\+\_\+mA}} = 70.\+0
\begin{DoxyCompactList}\small\item\em Courant maximum autorisé (mA) \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___b_r_i_d_g_e_ga4c933287b489bfcb0c54bf05f56ce5ce}{R1}} = 10000000.\+0
\begin{DoxyCompactList}\small\item\em Résistance R1 du pont. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___b_r_i_d_g_e_ga3d45a46703f2bacb54ea8510bcd790b4}{R2}} = 10000000.\+0
\begin{DoxyCompactList}\small\item\em Résistance R2 du pont. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___b_r_i_d_g_e_gae324f6e7fcc36bf022784b48967ab16a}{R3}} = 10000000.\+0
\begin{DoxyCompactList}\small\item\em Résistance R3 du pont. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___b_r_i_d_g_e_gaee269c8a7f023b521d5b295c33a4df61}{Vexc}} = 3.\+313
\begin{DoxyCompactList}\small\item\em Tension d\textquotesingle{}excitation du pont(\+V) \end{DoxyCompactList}\item 
const uint32\+\_\+t \mbox{\hyperlink{group___t_i_m_i_n_g_gaecf2c7161e42bd31ff9695933a1202f2}{INTERVALLE\+\_\+\+AFFICHAGE\+\_\+\+MS}} = 200
\begin{DoxyCompactList}\small\item\em Période rafraîchissement LCD (ms) \end{DoxyCompactList}\item 
const uint32\+\_\+t \mbox{\hyperlink{group___t_i_m_i_n_g_gad7ea73311bc095b278a461ed9f57b9cb}{INTERVALLE\+\_\+\+SAUVEGARDE\+\_\+\+MS}} = 10
\begin{DoxyCompactList}\small\item\em Période écriture SD (ms) \end{DoxyCompactList}\item 
const uint32\+\_\+t \mbox{\hyperlink{group___t_i_m_i_n_g_ga76846ed6670a498c96e0169c41dd4e2d}{TAILLE\+\_\+\+BUFFER}} = 500
\begin{DoxyCompactList}\small\item\em Taille buffer circulaire. \end{DoxyCompactList}\item 
const int \mbox{\hyperlink{group___t_i_m_i_n_g_gad7699f5b48066028c04319b81466ebe7}{NB\+\_\+\+TESTS\+\_\+\+TOTAL}} = 10
\begin{DoxyCompactList}\small\item\em Nombre de tests par cycle. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___d_e_t_e_c_t_i_o_n_ga18819bda016595943ba1d5fbaea7fc15}{SEUIL\+\_\+\+RCONTACT\+\_\+\+MIN}} = 100.\+0
\begin{DoxyCompactList}\small\item\em Résistance minimum pour détection. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{group___d_e_t_e_c_t_i_o_n_ga49446197df132bf68f791bbf637410b3}{SEUIL\+\_\+\+RESISTANCE\+\_\+\+MAX}} = 500000000.\+0
\begin{DoxyCompactList}\small\item\em Résistance maximum mesurable. \end{DoxyCompactList}\item 
const uint32\+\_\+t \mbox{\hyperlink{group___d_e_t_e_c_t_i_o_n_gab20dcddc288889f78fbbf35ff305282e}{DUREE\+\_\+\+MAX\+\_\+\+TEST\+\_\+\+MS}} = 300000
\begin{DoxyCompactList}\small\item\em Timeout test (5 minutes) \end{DoxyCompactList}\item 
Adafruit\+\_\+\+INA219 \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a69393b86406e49dbacfbabd283877495}{ina219}}
\begin{DoxyCompactList}\small\item\em Capteur de courant. \end{DoxyCompactList}\item 
Adafruit\+\_\+\+ADS1115 \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a951ac31de71c2bf701a13e5f233fc6d8}{ads}}
\begin{DoxyCompactList}\small\item\em ADC 16-\/bit. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_buffer_circulaire}{Buffer\+Circulaire}} \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a3d3d1b091c5c85b8b7f80b5193fd3881}{buffer}}
\begin{DoxyCompactList}\small\item\em Buffer circulaire principal. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_stats_test}{Stats\+Test}} \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a24776bf212245d78c583ec329fbd46cd}{stats}}
\begin{DoxyCompactList}\small\item\em stabilisation resistance du test \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_etat_affichage}{Etat\+Affichage}} \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_abba5fe68bd6acb19508210d38cf39415}{affichage}}
\begin{DoxyCompactList}\small\item\em État affichage LCD. \end{DoxyCompactList}\item 
Semaphore\+Handle\+\_\+t \mbox{\hyperlink{group___m_u_t_e_x_ga80ea639509bb2c62f4ce4c65d815e293}{mutex\+Buffer}}
\begin{DoxyCompactList}\small\item\em Protection buffer circulaire. \end{DoxyCompactList}\item 
Semaphore\+Handle\+\_\+t \mbox{\hyperlink{group___m_u_t_e_x_ga48eda68272f967bd740c3bfc3eca2144}{mutex\+Stats}}
\begin{DoxyCompactList}\small\item\em Protection statistiques. \end{DoxyCompactList}\item 
Semaphore\+Handle\+\_\+t \mbox{\hyperlink{group___m_u_t_e_x_gaaccda3b451926fc058955078f99d6565}{mutex\+Affichage}}
\begin{DoxyCompactList}\small\item\em Protection affichage. \end{DoxyCompactList}\item 
Task\+Handle\+\_\+t \mbox{\hyperlink{group___t_a_s_k_s_ga7a9fb87e19853527f8fda422ce9c95eb}{tache\+Mesure\+Handle}} = NULL
\begin{DoxyCompactList}\small\item\em Handle thread mesure. \end{DoxyCompactList}\item 
Task\+Handle\+\_\+t \mbox{\hyperlink{group___t_a_s_k_s_gad30f9d993c50f50b4e0a67b646b355a2}{tache\+Affichage\+Handle}} = NULL
\begin{DoxyCompactList}\small\item\em Handle thread affichage. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___c_o_n_t_r_o_l_gaabd070b67f3c8ef119748c1e0ca57f6f}{mesure\+Active}} = false
\begin{DoxyCompactList}\small\item\em État acquisition active. \end{DoxyCompactList}\item 
volatile uint8\+\_\+t \mbox{\hyperlink{group___c_o_n_t_r_o_l_gac6727037374f122fdc5cb50d8b90544c}{dac\+Courant}} = 0
\begin{DoxyCompactList}\small\item\em Valeur DAC courante. \end{DoxyCompactList}\item 
volatile uint32\+\_\+t \mbox{\hyperlink{group___c_o_n_t_r_o_l_ga7aece0986c83a90931b6bfa094b7c9c6}{temps\+Debut\+Micros}} = 0
\begin{DoxyCompactList}\small\item\em Timestamp début test. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___c_o_n_t_r_o_l_gaf0af5c4fd22be994b8ea588509ef8a0c}{arret\+Urgence}} = false
\begin{DoxyCompactList}\small\item\em Flag arrêt d\textquotesingle{}urgence. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___c_o_n_t_r_o_l_gaa4c19e827d7962db090bb07c6e213c30}{contact\+Detecte}} = false
\begin{DoxyCompactList}\small\item\em Flag contact détecté \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{group___c_o_n_t_r_o_l_gad250f64e1141478708ba05b568b7532e}{reinitialiser\+Demande}} = false
\begin{DoxyCompactList}\small\item\em Demande réinitialisation. \end{DoxyCompactList}\item 
File \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a38e756be89c7fc3aa589a64f8d8eb2ad}{data\+File}}
\begin{DoxyCompactList}\small\item\em Handle fichier données. \end{DoxyCompactList}\item 
String \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a101c74b41d874b73ddea64451d5a762b}{nom\+Fichier}} = "{}"{}
\begin{DoxyCompactList}\small\item\em Nom du fichier CSV. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_aa2cbf72561b1c4fdbf764de368af4aa5}{numero\+Test}} = 1
\begin{DoxyCompactList}\small\item\em Numéro test courant. \end{DoxyCompactList}\item 
volatile bool \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a165cd5cb5a7cc4082d967b22937bc431}{bouton\+Appuye}} = false
\begin{DoxyCompactList}\small\item\em État bouton BOOT. \end{DoxyCompactList}\item 
unsigned long \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_acc2975d38e409467b422e15557d92660}{dernier\+Appui}} = 0
\begin{DoxyCompactList}\small\item\em Anti-\/rebond bouton. \end{DoxyCompactList}\item 
volatile uint32\+\_\+t \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a7288326b387478a79f732088265f8138}{nb\+Mesures\+Total}} = 0
\begin{DoxyCompactList}\small\item\em Compteur mesures totales. \end{DoxyCompactList}\item 
volatile uint32\+\_\+t \mbox{\hyperlink{_mesure___r_e_s___s_i_m_p_l_e_8ino_a7c8d7114eef37976d99a9f9732382eff}{nb\+Mesures\+Sauvees}} = 0
\begin{DoxyCompactList}\small\item\em Compteur mesures sauvegardées. \end{DoxyCompactList}\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_doc-func-members}
\doxysubsection{Documentation des fonctions}
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_afcb12f7835ce41a8889afa6e0b28f7ea}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!arreterThreads@{arreterThreads}}
\index{arreterThreads@{arreterThreads}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{arreterThreads()}{arreterThreads()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_afcb12f7835ce41a8889afa6e0b28f7ea} 
void arreter\+Threads (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Arrête proprement les threads. 

Voici le graphe des appelants de cette fonction \+:
% FIG 1
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_adf8bb3facae4c992bc0390cd2f604fbd}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!attendreAppuiBouton@{attendreAppuiBouton}}
\index{attendreAppuiBouton@{attendreAppuiBouton}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{attendreAppuiBouton()}{attendreAppuiBouton()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_adf8bb3facae4c992bc0390cd2f604fbd} 
void attendre\+Appui\+Bouton (\begin{DoxyParamCaption}\item[{String}]{message}{}\end{DoxyParamCaption})}



Affiche un message et attend l\textquotesingle{}appui du bouton. 


\begin{DoxyParams}{Paramètres}
{\em message} & Message à afficher sur le LCD \\
\hline
\end{DoxyParams}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 2
Voici le graphe des appelants de cette fonction \+:
% FIG 3
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_ac48e6822b563e2b2c1a779f4a7f3f7cd}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!boutonAppuyeEtReset@{boutonAppuyeEtReset}}
\index{boutonAppuyeEtReset@{boutonAppuyeEtReset}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{boutonAppuyeEtReset()}{boutonAppuyeEtReset()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_ac48e6822b563e2b2c1a779f4a7f3f7cd} 
bool bouton\+Appuye\+Et\+Reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Vérifie et réinitialise l\textquotesingle{}état du bouton. 

\begin{DoxyReturn}{Renvoie}
true si le bouton a été appuyé 
\end{DoxyReturn}
Voici le graphe des appelants de cette fonction \+:
% FIG 4
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6ec22dd5d0efef5c7862d062244f2d3d}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!calculerResistance@{calculerResistance}}
\index{calculerResistance@{calculerResistance}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{calculerResistance()}{calculerResistance()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6ec22dd5d0efef5c7862d062244f2d3d} 
float calculer\+Resistance (\begin{DoxyParamCaption}\item[{int16\+\_\+t}]{raw\+Diff}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Calcule la résistance depuis la mesure différentielle. 


\begin{DoxyParams}{Paramètres}
{\em raw\+Diff} & Valeur ADC différentielle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
Résistance calculée ou -\/999999.\+0f si invalide 
\end{DoxyReturn}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 5
Voici le graphe des appelants de cette fonction \+:
% FIG 6
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a16ada3623dbae3b31d44cd17530e7285}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!demarrerThreads@{demarrerThreads}}
\index{demarrerThreads@{demarrerThreads}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{demarrerThreads()}{demarrerThreads()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a16ada3623dbae3b31d44cd17530e7285} 
void demarrer\+Threads (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{temps\+Debut}{}\end{DoxyParamCaption})}



Démarre les threads d\textquotesingle{}acquisition et d\textquotesingle{}affichage. 


\begin{DoxyParams}{Paramètres}
{\em temps\+Debut} & Timestamp de référence en microsecondes \\
\hline
\end{DoxyParams}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 7
Voici le graphe des appelants de cette fonction \+:
% FIG 8
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_ad380242a441638cb12c7c4f8ffd65d0a}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!formaterValeurCSV@{formaterValeurCSV}}
\index{formaterValeurCSV@{formaterValeurCSV}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{formaterValeurCSV()}{formaterValeurCSV()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_ad380242a441638cb12c7c4f8ffd65d0a} 
String formater\+Valeur\+CSV (\begin{DoxyParamCaption}\item[{float}]{valeur}{, }\item[{int}]{decimales}{ = {\ttfamily 3}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Formate une valeur pour export CSV. 


\begin{DoxyParams}{Paramètres}
{\em valeur} & Valeur à formater \\
\hline
{\em decimales} & Nombre de décimales \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
String formatée ou "{}\+N/\+A"{} si invalide 
\end{DoxyReturn}
Voici le graphe des appelants de cette fonction \+:
% FIG 9
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6f9652f1e487981c3821d9610f1e4509}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!gestionBoutonBoot@{gestionBoutonBoot}}
\index{gestionBoutonBoot@{gestionBoutonBoot}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{gestionBoutonBoot()}{gestionBoutonBoot()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6f9652f1e487981c3821d9610f1e4509} 
void gestion\+Bouton\+Boot (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



ISR pour gestion du bouton BOOT. 

\begin{DoxyNote}{Note}
Fonction IRAM\+\_\+\+ATTR pour exécution depuis la RAM 
\end{DoxyNote}
Voici le graphe des appelants de cette fonction \+:
% FIG 10
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6efd9745976761abd83e668058abc833}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!initialiserCapteurs@{initialiserCapteurs}}
\index{initialiserCapteurs@{initialiserCapteurs}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{initialiserCapteurs()}{initialiserCapteurs()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6efd9745976761abd83e668058abc833} 
bool initialiser\+Capteurs (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initialise les capteurs I2C. 

\begin{DoxyReturn}{Renvoie}
true si l\textquotesingle{}initialisation réussit 
\end{DoxyReturn}
Voici le graphe des appelants de cette fonction \+:
% FIG 11
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a2f63ecba5f338345a6cd4ca7bfd48a90}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!lcd@{lcd}}
\index{lcd@{lcd}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{lcd()}{lcd()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a2f63ecba5f338345a6cd4ca7bfd48a90} 
Liquid\+Crystal\+\_\+\+I2C lcd (\begin{DoxyParamCaption}\item[{0x27}]{}{, }\item[{16}]{}{, }\item[{4}]{}{}\end{DoxyParamCaption})}



Écran LCD I2C. 

Voici le graphe des appelants de cette fonction \+:
% FIG 12
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_afe461d27b9c48d5921c00d521181f12f}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!loop@{loop}}
\index{loop@{loop}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Boucle principale du programme. 

\begin{DoxyNote}{Note}
Gère le séquencement des tests et le contrôle DAC 
\end{DoxyNote}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 13
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a5189a9ff8ff84c69c1c9f0d5c518e6d4}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!reinitialiserVariablesTest@{reinitialiserVariablesTest}}
\index{reinitialiserVariablesTest@{reinitialiserVariablesTest}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{reinitialiserVariablesTest()}{reinitialiserVariablesTest()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a5189a9ff8ff84c69c1c9f0d5c518e6d4} 
void reinitialiser\+Variables\+Test (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Réinitialise toutes les variables de test de manière thread-\/safe. 

\begin{DoxyNote}{Note}
Utilise les mutex pour éviter les conditions de course 
\end{DoxyNote}
Voici le graphe des appelants de cette fonction \+:
% FIG 14
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_aea848bb4a005524a574f94adbc6c65f0}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!resistanceValide@{resistanceValide}}
\index{resistanceValide@{resistanceValide}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{resistanceValide()}{resistanceValide()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_aea848bb4a005524a574f94adbc6c65f0} 
bool resistance\+Valide (\begin{DoxyParamCaption}\item[{float}]{r}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Valide une mesure de résistance. 


\begin{DoxyParams}{Paramètres}
{\em r} & Résistance à valider \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
true si la résistance est valide 
\end{DoxyReturn}
Voici le graphe des appelants de cette fonction \+:
% FIG 15
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a4fc01d736fe50cf5b977f755b675f11d}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!setup@{setup}}
\index{setup@{setup}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Fonction d\textquotesingle{}initialisation Arduino. 

\begin{DoxyNote}{Note}
Appelée une seule fois au démarrage 
\end{DoxyNote}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 16
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a8234cf882017f42811473aa035ddb0cc}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!tacheAffichageSauvegarde@{tacheAffichageSauvegarde}}
\index{tacheAffichageSauvegarde@{tacheAffichageSauvegarde}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{tacheAffichageSauvegarde()}{tacheAffichageSauvegarde()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a8234cf882017f42811473aa035ddb0cc} 
void tache\+Affichage\+Sauvegarde (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{param}{}\end{DoxyParamCaption})}



Thread d\textquotesingle{}affichage LCD et sauvegarde SD. 


\begin{DoxyParams}{Paramètres}
{\em param} & Paramètre non utilisé (Free\+RTOS) \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Exécuté sur Core 1 avec priorité haute Implémente l\textquotesingle{}anti-\/flickering LCD 
\end{DoxyNote}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 17
Voici le graphe des appelants de cette fonction \+:
% FIG 18
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6d714b0571bf85597665718596fa24c4}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!tacheMesureUltraRapide@{tacheMesureUltraRapide}}
\index{tacheMesureUltraRapide@{tacheMesureUltraRapide}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{tacheMesureUltraRapide()}{tacheMesureUltraRapide()}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a6d714b0571bf85597665718596fa24c4} 
void tache\+Mesure\+Ultra\+Rapide (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{param}{}\end{DoxyParamCaption})}



Thread d\textquotesingle{}acquisition. 


\begin{DoxyParams}{Paramètres}
{\em param} & Paramètre non utilisé (Free\+RTOS) \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Exécuté sur Core 0 avec priorité maximale 
\end{DoxyNote}
Voici le graphe d\textquotesingle{}appel pour cette fonction \+:
% FIG 19
Voici le graphe des appelants de cette fonction \+:
% FIG 20


\label{doc-var-members}
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_doc-var-members}
\doxysubsection{Documentation des variables}
\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a951ac31de71c2bf701a13e5f233fc6d8}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!ads@{ads}}
\index{ads@{ads}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{ads}{ads}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a951ac31de71c2bf701a13e5f233fc6d8} 
Adafruit\+\_\+\+ADS1115 ads}



ADC 16-\/bit. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_abba5fe68bd6acb19508210d38cf39415}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!affichage@{affichage}}
\index{affichage@{affichage}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{affichage}{affichage}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_abba5fe68bd6acb19508210d38cf39415} 
\mbox{\hyperlink{struct_etat_affichage}{Etat\+Affichage}} affichage}



État affichage LCD. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a165cd5cb5a7cc4082d967b22937bc431}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!boutonAppuye@{boutonAppuye}}
\index{boutonAppuye@{boutonAppuye}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{boutonAppuye}{boutonAppuye}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a165cd5cb5a7cc4082d967b22937bc431} 
volatile bool bouton\+Appuye = false}



État bouton BOOT. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a3d3d1b091c5c85b8b7f80b5193fd3881}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!buffer@{buffer}}
\index{buffer@{buffer}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{buffer}{buffer}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a3d3d1b091c5c85b8b7f80b5193fd3881} 
\mbox{\hyperlink{struct_buffer_circulaire}{Buffer\+Circulaire}} buffer}



Buffer circulaire principal. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a38e756be89c7fc3aa589a64f8d8eb2ad}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!dataFile@{dataFile}}
\index{dataFile@{dataFile}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{dataFile}{dataFile}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a38e756be89c7fc3aa589a64f8d8eb2ad} 
File data\+File}



Handle fichier données. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_acc2975d38e409467b422e15557d92660}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!dernierAppui@{dernierAppui}}
\index{dernierAppui@{dernierAppui}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{dernierAppui}{dernierAppui}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_acc2975d38e409467b422e15557d92660} 
unsigned long dernier\+Appui = 0}



Anti-\/rebond bouton. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a69393b86406e49dbacfbabd283877495}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!ina219@{ina219}}
\index{ina219@{ina219}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{ina219}{ina219}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a69393b86406e49dbacfbabd283877495} 
Adafruit\+\_\+\+INA219 ina219}



Capteur de courant. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a7c8d7114eef37976d99a9f9732382eff}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!nbMesuresSauvees@{nbMesuresSauvees}}
\index{nbMesuresSauvees@{nbMesuresSauvees}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{nbMesuresSauvees}{nbMesuresSauvees}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a7c8d7114eef37976d99a9f9732382eff} 
volatile uint32\+\_\+t nb\+Mesures\+Sauvees = 0}



Compteur mesures sauvegardées. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a7288326b387478a79f732088265f8138}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!nbMesuresTotal@{nbMesuresTotal}}
\index{nbMesuresTotal@{nbMesuresTotal}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{nbMesuresTotal}{nbMesuresTotal}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a7288326b387478a79f732088265f8138} 
volatile uint32\+\_\+t nb\+Mesures\+Total = 0}



Compteur mesures totales. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a101c74b41d874b73ddea64451d5a762b}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!nomFichier@{nomFichier}}
\index{nomFichier@{nomFichier}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{nomFichier}{nomFichier}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a101c74b41d874b73ddea64451d5a762b} 
String nom\+Fichier = "{}"{}}



Nom du fichier CSV. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_aa2cbf72561b1c4fdbf764de368af4aa5}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!numeroTest@{numeroTest}}
\index{numeroTest@{numeroTest}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{numeroTest}{numeroTest}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_aa2cbf72561b1c4fdbf764de368af4aa5} 
int numero\+Test = 1}



Numéro test courant. 

\Hypertarget{_mesure___r_e_s___s_i_m_p_l_e_8ino_a24776bf212245d78c583ec329fbd46cd}\index{Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}!stats@{stats}}
\index{stats@{stats}!Mesure\_RES\_SIMPLE.ino@{Mesure\_RES\_SIMPLE.ino}}
\doxysubsubsection{\texorpdfstring{stats}{stats}}
{\footnotesize\ttfamily \label{_mesure___r_e_s___s_i_m_p_l_e_8ino_a24776bf212245d78c583ec329fbd46cd} 
\mbox{\hyperlink{struct_stats_test}{Stats\+Test}} stats}



stabilisation resistance du test 

